
import "@splitgraph/design/css/sphinxtheme.css";

export const meta = {
  title: "splitgraph.engine package",
  id: "splitgraph.engine package"
};

<div className=" rst-content"><nav className="toc"><ol className="toc-level toc-level-1"><li className="toc-item toc-item-h2"><a className="toc-link toc-link-h2" href="#module-contents">Module contents</a></li><li className="toc-item toc-item-h2"><a className="toc-link toc-link-h2" href="#subpackages">Subpackages</a></li></ol></nav><div className="section" id="module-splitgraph.engine">
<span id="module-contents"></span><h2 id="module-contents">Module contents<a className="headerlink" href="#module-splitgraph.engine" title="Permalink to this headline">¶</a></h2>
<p>Defines the interface for a Splitgraph engine (a backing database), including running basic SQL commands,
tracking tables for changes and uploading/downloading tables to other remote engines.</p>
<p>By default, Splitgraph is backed by Postgres: see <a className="reference internal" href="splitgraph.engine.postgres/#module-splitgraph.engine.postgres" title="splitgraph.engine.postgres"><code className="xref py py-mod docutils literal notranslate"><span className="pre">splitgraph.engine.postgres</span></code></a> for an example of how to
implement a different engine.</p>
<dl className="py class">
<dt id="splitgraph.engine.ChangeEngine">
<em className="property"><span className="pre">class</span> </em><code className="sig-prename descclassname"><span className="pre">splitgraph.engine.</span></code><code className="sig-name descname"><span className="pre">ChangeEngine</span></code><a className="headerlink" href="#splitgraph.engine.ChangeEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a className="reference internal" href="#splitgraph.engine.SQLEngine" title="splitgraph.engine.SQLEngine"><code className="xref py py-class docutils literal notranslate"><span className="pre">splitgraph.engine.SQLEngine</span></code></a>, <code className="xref py py-class docutils literal notranslate"><span className="pre">abc.ABC</span></code></p>
<p>An SQL engine that can perform change tracking on a set of tables.</p>
<dl className="py method">
<dt id="splitgraph.engine.ChangeEngine.discard_pending_changes">
<code className="sig-name descname"><span className="pre">discard_pending_changes</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">None</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ChangeEngine.discard_pending_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Discard recorded pending changes for a tracked table or the whole schema</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ChangeEngine.get_change_key">
<code className="sig-name descname"><span className="pre">get_change_key</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">List</span><span className="p"><span className="pre">[</span></span><span className="pre">Tuple</span><span className="p"><span className="pre">[</span></span><span className="pre">str</span><span className="p"><span className="pre">,</span> </span><span className="pre">str</span><span className="p"><span className="pre">]</span></span><span className="p"><span className="pre">]</span></span><a className="headerlink" href="#splitgraph.engine.ChangeEngine.get_change_key" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the key used to identify a row in a change (list of column name, column type).
If the tracked table has a PK, we use that; if it doesn’t, the whole row is used.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ChangeEngine.get_changed_tables">
<code className="sig-name descname"><span className="pre">get_changed_tables</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ChangeEngine.get_changed_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>List tracked tables that have pending changes</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><p><strong>schema</strong> – Schema to check for changes</p>
</dd>
<dt className="field-even">Returns</dt>
<dd className="field-even"><p>List of tables with changed contents</p>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ChangeEngine.get_pending_changes">
<code className="sig-name descname"><span className="pre">get_pending_changes</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">aggregate</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">False</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ChangeEngine.get_pending_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return pending changes for a given tracked table</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>schema</strong> – Schema the table belongs to</p></li>
<li><p><strong>table</strong> – Table to return changes for</p></li>
<li><p><strong>aggregate</strong> – Whether to aggregate changes or return them completely</p></li>
</ul>
</dd>
<dt className="field-even">Returns</dt>
<dd className="field-even"><p>If aggregate is True: tuple with numbers of <cite>(added_rows, removed_rows, updated_rows)</cite>.
If aggregate is False: A changeset. The changeset is a list of
<cite>(pk, action (0 for Insert, 1 for Delete, 2 for Update), action_data)</cite>
where <cite>action_data</cite> is <cite>None</cite> for Delete and <cite>&#38;lbrace;‘c’: [column_names], ‘v’: [column_values]&#38;rbrace;</cite> that
have been inserted/updated otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ChangeEngine.get_tracked_tables">
<code className="sig-name descname"><span className="pre">get_tracked_tables</span></code><span className="sig-paren">(</span><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ChangeEngine.get_tracked_tables" title="Permalink to this definition">¶</a></dt>
<dd><dl className="field-list simple">
<dt className="field-odd">Returns</dt>
<dd className="field-odd"><p>A list of (table_schema, table_name) that the engine currently tracks for changes</p>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ChangeEngine.has_pending_changes">
<code className="sig-name descname"><span className="pre">has_pending_changes</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ChangeEngine.has_pending_changes" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the tracked schema has pending changes and False if it doesn’t.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ChangeEngine.track_tables">
<code className="sig-name descname"><span className="pre">track_tables</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">tables</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ChangeEngine.track_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Start engine-specific change tracking on a list of tables.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><p><strong>tables</strong> – List of (table_schema, table_name) to start tracking</p>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ChangeEngine.untrack_tables">
<code className="sig-name descname"><span className="pre">untrack_tables</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">tables</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ChangeEngine.untrack_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop engine-specific change tracking on a list of tables and delete any pending changes.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><p><strong>tables</strong> – List of (table_schema, table_name) to start tracking</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl className="py class">
<dt id="splitgraph.engine.ObjectEngine">
<em className="property"><span className="pre">class</span> </em><code className="sig-prename descclassname"><span className="pre">splitgraph.engine.</span></code><code className="sig-name descname"><span className="pre">ObjectEngine</span></code><a className="headerlink" href="#splitgraph.engine.ObjectEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code className="xref py py-class docutils literal notranslate"><span className="pre">object</span></code></p>
<p>Routines for storing/applying objects as well as sharing them with other engines.</p>
<dl className="py method">
<dt id="splitgraph.engine.ObjectEngine.apply_fragments">
<code className="sig-name descname"><span className="pre">apply_fragments</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">objects</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">target_schema</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">target_table</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">extra_quals</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">None</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">extra_qual_args</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">None</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">schema_spec</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">None</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">progress_every</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">Optional</span><span className="p"><span className="pre">[</span></span><span className="pre">int</span><span className="p"><span className="pre">]</span></span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">None</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ObjectEngine.apply_fragments" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply multiple fragments to a target table as a single-query batch operation.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>objects</strong> – List of tuples <cite>(object_schema, object_table)</cite> that the objects are stored in.</p></li>
<li><p><strong>target_schema</strong> – Schema to apply the fragment to</p></li>
<li><p><strong>target_table</strong> – Table to apply the fragment to</p></li>
<li><p><strong>extra_quals</strong> – Optional, extra SQL (Composable) clauses to filter new rows in the fragment on
(e.g. SQL(“a = %s”))</p></li>
<li><p><strong>extra_qual_args</strong> – Optional, a tuple of arguments to use with <cite>extra_quals</cite></p></li>
<li><p><strong>schema_spec</strong> – Optional, list of (ordinal, column_name, column_type, is_pk).
If not specified, uses the schema of target_table.</p></li>
<li><p><strong>progress_every</strong> – If set, will report the materialization progress via
tqdm every <cite>progress_every</cite> objects.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ObjectEngine.delete_objects">
<code className="sig-name descname"><span className="pre">delete_objects</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">object_ids</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ObjectEngine.delete_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete one or more objects from the engine.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><p><strong>object_ids</strong> – IDs of objects to delete</p>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ObjectEngine.download_objects">
<code className="sig-name descname"><span className="pre">download_objects</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">objects</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">remote_engine</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ObjectEngine.download_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Download objects from the remote engine to the local cache</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>objects</strong> – List of object IDs to download</p></li>
<li><p><strong>remote_engine</strong> – A remote ObjectEngine to download the objects from.</p></li>
</ul>
</dd>
</dl>
<p>:return List of object IDs that were downloaded.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ObjectEngine.dump_object">
<code className="sig-name descname"><span className="pre">dump_object</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">object_id</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">stream</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">schema</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ObjectEngine.dump_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump an object into a series of SQL statements</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>object_id</strong> – Object ID</p></li>
<li><p><strong>stream</strong> – Text stream to dump the object into</p></li>
<li><p><strong>schema</strong> – Schema the object lives in</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ObjectEngine.get_object_schema">
<code className="sig-name descname"><span className="pre">get_object_schema</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">object_id</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ObjectEngine.get_object_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the schema of a given object, returned as a list of
(ordinal, column_name, column_type, is_pk).</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><p><strong>object_id</strong> – ID of the object</p>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ObjectEngine.get_object_size">
<code className="sig-name descname"><span className="pre">get_object_size</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">object_id</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ObjectEngine.get_object_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the on-disk footprint of this object, in bytes
:param object_id: ID of the object</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ObjectEngine.store_fragment">
<code className="sig-name descname"><span className="pre">store_fragment</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">inserted</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">deleted</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">schema</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">source_schema</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">source_table</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">source_schema_spec</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ObjectEngine.store_fragment" title="Permalink to this definition">¶</a></dt>
<dd><p>Store a fragment of a changed table in another table</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>inserted</strong> – List of PKs that have been updated/inserted</p></li>
<li><p><strong>deleted</strong> – List of PKs that have been deleted</p></li>
<li><p><strong>schema</strong> – Schema to store the change in</p></li>
<li><p><strong>table</strong> – Table to store the change in</p></li>
<li><p><strong>source_schema</strong> – Schema the source table is located in</p></li>
<li><p><strong>source_table</strong> – Name of the source table</p></li>
<li><p><strong>source_schema_spec</strong> – Schema of the source table (optional)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ObjectEngine.store_object">
<code className="sig-name descname"><span className="pre">store_object</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">object_id</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">source_query</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">Union</span><span className="p"><span className="pre">[</span></span><span className="pre">bytes</span><span className="p"><span className="pre">,</span> </span><span className="pre">psycopg2.sql.Composed</span><span className="p"><span className="pre">,</span> </span><span className="pre">str</span><span className="p"><span className="pre">,</span> </span><span className="pre">psycopg2.sql.SQL</span><span className="p"><span className="pre">]</span></span></span></em>, <em className="sig-param"><span className="n"><span className="pre">schema_spec</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">List</span><span className="p"><span className="pre">[</span></span><a className="reference internal" href="splitgraph.core/#splitgraph.core.types.TableColumn" title="splitgraph.core.types.TableColumn"><span className="pre">splitgraph.core.types.TableColumn</span></a><span className="p"><span className="pre">]</span></span></span></em>, <em className="sig-param"><span className="n"><span className="pre">source_query_args</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">Optional</span><span className="p"><span className="pre">[</span></span><span className="pre">Sequence</span><span className="p"><span className="pre">[</span></span><span className="pre">Any</span><span className="p"><span className="pre">]</span></span><span className="p"><span className="pre">]</span></span></span></em>, <em className="sig-param"><span className="n"><span className="pre">overwrite</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ObjectEngine.store_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores a Splitgraph object using a source query in the actual format
implemented by this engine.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>object_id</strong> – Name of the object</p></li>
<li><p><strong>source_query</strong> – SELECT query that produces data required by the object</p></li>
<li><p><strong>schema_spec</strong> – Schema of the source table</p></li>
<li><p><strong>source_query_args</strong> – Arguments to mogrify into the source query.</p></li>
<li><p><strong>overwrite</strong> – If True, will overwrite the object if it already exists.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.ObjectEngine.upload_objects">
<code className="sig-name descname"><span className="pre">upload_objects</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">objects</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">remote_engine</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ObjectEngine.upload_objects" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload objects from the local cache to the remote engine</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>objects</strong> – List of object IDs to upload</p></li>
<li><p><strong>remote_engine</strong> – A remote ObjectEngine to upload the objects to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl className="py class">
<dt id="splitgraph.engine.ResultShape">
<em className="property"><span className="pre">class</span> </em><code className="sig-prename descclassname"><span className="pre">splitgraph.engine.</span></code><code className="sig-name descname"><span className="pre">ResultShape</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">value</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.ResultShape" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code className="xref py py-class docutils literal notranslate"><span className="pre">enum.Enum</span></code></p>
<p>Shape that the result of a query will be coerced to</p>
<dl className="py attribute">
<dt id="splitgraph.engine.ResultShape.MANY_MANY">
<code className="sig-name descname"><span className="pre">MANY_MANY</span></code><em className="property"> <span className="pre">=</span> <span className="pre">4</span></em><a className="headerlink" href="#splitgraph.engine.ResultShape.MANY_MANY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl className="py attribute">
<dt id="splitgraph.engine.ResultShape.MANY_ONE">
<code className="sig-name descname"><span className="pre">MANY_ONE</span></code><em className="property"> <span className="pre">=</span> <span className="pre">3</span></em><a className="headerlink" href="#splitgraph.engine.ResultShape.MANY_ONE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl className="py attribute">
<dt id="splitgraph.engine.ResultShape.NONE">
<code className="sig-name descname"><span className="pre">NONE</span></code><em className="property"> <span className="pre">=</span> <span className="pre">0</span></em><a className="headerlink" href="#splitgraph.engine.ResultShape.NONE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl className="py attribute">
<dt id="splitgraph.engine.ResultShape.ONE_MANY">
<code className="sig-name descname"><span className="pre">ONE_MANY</span></code><em className="property"> <span className="pre">=</span> <span className="pre">2</span></em><a className="headerlink" href="#splitgraph.engine.ResultShape.ONE_MANY" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl className="py attribute">
<dt id="splitgraph.engine.ResultShape.ONE_ONE">
<code className="sig-name descname"><span className="pre">ONE_ONE</span></code><em className="property"> <span className="pre">=</span> <span className="pre">1</span></em><a className="headerlink" href="#splitgraph.engine.ResultShape.ONE_ONE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl className="py class">
<dt id="splitgraph.engine.SQLEngine">
<em className="property"><span className="pre">class</span> </em><code className="sig-prename descclassname"><span className="pre">splitgraph.engine.</span></code><code className="sig-name descname"><span className="pre">SQLEngine</span></code><a className="headerlink" href="#splitgraph.engine.SQLEngine" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code className="xref py py-class docutils literal notranslate"><span className="pre">abc.ABC</span></code></p>
<p>Abstraction for a Splitgraph SQL backend. Requires any overriding classes to implement <cite>run_sql</cite> as well as
a few other functions. Together with the <cite>information_schema</cite> (part of the SQL standard), this class uses those
functions to implement some basic database management methods like listing, deleting, creating, dumping
and loading tables.</p>
<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.close">
<code className="sig-name descname"><span className="pre">close</span></code><span className="sig-paren">(</span><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit and close the engine’s backing connection</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.commit">
<code className="sig-name descname"><span className="pre">commit</span></code><span className="sig-paren">(</span><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the engine’s backing connection</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.copy_table">
<code className="sig-name descname"><span className="pre">copy_table</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">source_schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">source_table</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">target_schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">target_table</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">with_pk_constraints</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">True</span></span></em><span className="sig-paren">)</span> → <span className="pre">None</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.copy_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a table in the same engine, optionally applying primary key constraints as well.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.create_schema">
<code className="sig-name descname"><span className="pre">create_schema</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">None</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.create_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a schema if it doesn’t exist</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.create_table">
<code className="sig-name descname"><span className="pre">create_table</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">Optional</span><span className="p"><span className="pre">[</span></span><span className="pre">str</span><span className="p"><span className="pre">]</span></span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">schema_spec</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">List</span><span className="p"><span className="pre">[</span></span><a className="reference internal" href="splitgraph.core/#splitgraph.core.types.TableColumn" title="splitgraph.core.types.TableColumn"><span className="pre">splitgraph.core.types.TableColumn</span></a><span className="p"><span className="pre">]</span></span></span></em>, <em className="sig-param"><span className="n"><span className="pre">unlogged</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">False</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">temporary</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">False</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">include_comments</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">False</span></span></em><span className="sig-paren">)</span> → <span className="pre">None</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.create_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a table using a previously-dumped table schema spec</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>schema</strong> – Schema to create the table in</p></li>
<li><p><strong>table</strong> – Table name to create</p></li>
<li><p><strong>schema_spec</strong> – TableSchema</p></li>
<li><p><strong>unlogged</strong> – If True, the table won’t be reflected in the WAL or scanned by the analyzer/autovacuum.</p></li>
<li><p><strong>temporary</strong> – If True, a temporary table is created (the schema parameter is ignored)</p></li>
<li><p><strong>include_comments</strong> – If True, also adds COMMENT statements for columns that have them.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.delete_schema">
<code className="sig-name descname"><span className="pre">delete_schema</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">None</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.delete_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete a schema if it exists, including all the tables in it.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.delete_table">
<code className="sig-name descname"><span className="pre">delete_table</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">None</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.delete_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Drop a table from a schema if it exists</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.dump_table_creation">
<em className="property"><span className="pre">static</span> </em><code className="sig-name descname"><span className="pre">dump_table_creation</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">Optional</span><span className="p"><span className="pre">[</span></span><span className="pre">str</span><span className="p"><span className="pre">]</span></span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">schema_spec</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">List</span><span className="p"><span className="pre">[</span></span><a className="reference internal" href="splitgraph.core/#splitgraph.core.types.TableColumn" title="splitgraph.core.types.TableColumn"><span className="pre">splitgraph.core.types.TableColumn</span></a><span className="p"><span className="pre">]</span></span></span></em>, <em className="sig-param"><span className="n"><span className="pre">unlogged</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">False</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">temporary</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">False</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">include_comments</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">False</span></span></em><span className="sig-paren">)</span> → <span className="pre">Tuple</span><span className="p"><span className="pre">[</span></span><span className="pre">psycopg2.sql.Composed</span><span className="p"><span className="pre">,</span> </span><span className="pre">Tuple</span><span className="p"><span className="pre">]</span></span><a className="headerlink" href="#splitgraph.engine.SQLEngine.dump_table_creation" title="Permalink to this definition">¶</a></dt>
<dd><p>Dumps the DDL for a table using a previously-dumped table schema spec</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>schema</strong> – Schema to create the table in</p></li>
<li><p><strong>table</strong> – Table name to create</p></li>
<li><p><strong>schema_spec</strong> – TableSchema</p></li>
<li><p><strong>unlogged</strong> – If True, the table won’t be reflected in the WAL or scanned by the analyzer/autovacuum.</p></li>
<li><p><strong>temporary</strong> – If True, a temporary table is created (the schema parameter is ignored)</p></li>
<li><p><strong>include_comments</strong> – If True, also adds COMMENT statements for columns that have them.</p></li>
</ul>
</dd>
<dt className="field-even">Returns</dt>
<dd className="field-even"><p>An SQL statement that reconstructs the table schema + args to be mogrified into it.</p>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.dump_table_sql">
<code className="sig-name descname"><span className="pre">dump_table_sql</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table_name</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">stream</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">columns</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">'*'</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">where</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">''</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">where_args</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">None</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">target_schema</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">None</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">target_table</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">None</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.dump_table_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump the table contents in the SQL format
:param schema: Schema the table is located in
:param table_name: Name of the table
:param stream: A file-like object to write the result into.
:param columns: SQL column spec. Default ‘*’.
:param where: Optional, an SQL WHERE clause
:param where_args: Arguments for the optional WHERE clause.
:param target_schema: Schema to create the table in (default same as <cite>schema</cite>)
:param target_table: Name of the table to insert data into (default same as <cite>table_name</cite>)</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.get_all_tables">
<code className="sig-name descname"><span className="pre">get_all_tables</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">List</span><span className="p"><span className="pre">[</span></span><span className="pre">str</span><span className="p"><span className="pre">]</span></span><a className="headerlink" href="#splitgraph.engine.SQLEngine.get_all_tables" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all tables in a given schema.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.get_full_table_schema">
<code className="sig-name descname"><span className="pre">get_full_table_schema</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table_name</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">List</span><span className="p"><span className="pre">[</span></span><a className="reference internal" href="splitgraph.core/#splitgraph.core.types.TableColumn" title="splitgraph.core.types.TableColumn"><span className="pre">splitgraph.core.types.TableColumn</span></a><span className="p"><span className="pre">]</span></span><a className="headerlink" href="#splitgraph.engine.SQLEngine.get_full_table_schema" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a list of (column ordinal, name, data type, is_pk, column comment),
used to detect schema changes like columns being dropped/added/renamed or type changes.</p>
<p>NB this doesn’t work for temporary tables (pg_temp) and returns an empty schema.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.get_primary_keys">
<code className="sig-name descname"><span className="pre">get_primary_keys</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.get_primary_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Get a list of (column_name, column_type) denoting the primary keys of a given table.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.get_table_type">
<code className="sig-name descname"><span className="pre">get_table_type</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">Optional</span><span className="p"><span className="pre">[</span></span><span className="pre">str</span><span className="p"><span className="pre">]</span></span><a className="headerlink" href="#splitgraph.engine.SQLEngine.get_table_type" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the type of the table (BASE or FOREIGN)</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.initialize">
<code className="sig-name descname"><span className="pre">initialize</span></code><span className="sig-paren">(</span><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Does any required initialization of the engine</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.lock_table">
<code className="sig-name descname"><span className="pre">lock_table</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.lock_table" title="Permalink to this definition">¶</a></dt>
<dd><p>Acquire an exclusive lock on a given table, released when the transaction commits / rolls back.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.rollback">
<code className="sig-name descname"><span className="pre">rollback</span></code><span className="sig-paren">(</span><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback the engine’s backing connection</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.run_sql">
<code className="sig-name descname"><span className="pre">run_sql</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="pre">statement</span></em>, <em className="sig-param"><span className="pre">arguments=None</span></em>, <em className="sig-param"><span className="pre">return_shape=&lt;ResultShape.MANY_MANY:</span> <span className="pre">4></span></em>, <em className="sig-param"><span className="pre">named=False</span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.run_sql" title="Permalink to this definition">¶</a></dt>
<dd><p>Run an arbitrary SQL statement with some arguments, return an iterator of results.
If the statement doesn’t return any results, return None. If named=True, return named
tuples when possible.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.run_sql_batch">
<code className="sig-name descname"><span className="pre">run_sql_batch</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">statement</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">arguments</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="o"><span className="pre">=</span></span><span className="default_value"><span className="pre">None</span></span></em><span className="sig-paren">)</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.run_sql_batch" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a parameterized SQL statement against multiple sets of arguments.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>statement</strong> – Statement to run</p></li>
<li><p><strong>arguments</strong> – Query arguments</p></li>
<li><p><strong>schema</strong> – Schema to run the statement in</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.run_sql_in">
<code className="sig-name descname"><span className="pre">run_sql_in</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="pre">schema:</span> <span className="pre">str,</span> <span className="pre">sql:</span> <span className="pre">Union[psycopg2.sql.Composed,</span> <span className="pre">str],</span> <span className="pre">arguments:</span> <span className="pre">None</span> <span className="pre">=</span> <span className="pre">None,</span> <span className="pre">return_shape:</span> <span className="pre">splitgraph.engine.ResultShape</span> <span className="pre">=</span> <span className="pre">&lt;ResultShape.MANY_MANY:</span> <span className="pre">4></span></em><span className="sig-paren">)</span> → <span className="pre">Any</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.run_sql_in" title="Permalink to this definition">¶</a></dt>
<dd><p>Executes a non-schema-qualified query against a specific schema.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>schema</strong> – Schema to run the query in</p></li>
<li><p><strong>sql</strong> – Query</p></li>
<li><p><strong>arguments</strong> – Query arguments</p></li>
<li><p><strong>return_shape</strong> – ReturnShape to coerce the result into.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.savepoint">
<code className="sig-name descname"><span className="pre">savepoint</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">name</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">Iterator</span><span className="p"><span className="pre">[</span></span><span className="pre">None</span><span className="p"><span className="pre">]</span></span><a className="headerlink" href="#splitgraph.engine.SQLEngine.savepoint" title="Permalink to this definition">¶</a></dt>
<dd><p>At the beginning of this context manager, a savepoint is initialized and any database
error that occurs in run_sql results in a rollback to this savepoint rather than the
rollback of the whole transaction. At exit, the savepoint is released.</p>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.schema_exists">
<code className="sig-name descname"><span className="pre">schema_exists</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">bool</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.schema_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a schema exists on the engine.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><p><strong>schema</strong> – Schema name</p>
</dd>
</dl>
</dd></dl>

<dl className="py method">
<dt id="splitgraph.engine.SQLEngine.table_exists">
<code className="sig-name descname"><span className="pre">table_exists</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">schema</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">table_name</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">bool</span><a className="headerlink" href="#splitgraph.engine.SQLEngine.table_exists" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a table exists on the engine.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>schema</strong> – Schema name</p></li>
<li><p><strong>table_name</strong> – Table name</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl className="py class">
<dt id="splitgraph.engine.SavepointStack">
<em className="property"><span className="pre">class</span> </em><code className="sig-prename descclassname"><span className="pre">splitgraph.engine.</span></code><code className="sig-name descname"><span className="pre">SavepointStack</span></code><a className="headerlink" href="#splitgraph.engine.SavepointStack" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code className="xref py py-class docutils literal notranslate"><span className="pre">_thread._local</span></code></p>
</dd></dl>

<dl className="py function">
<dt id="splitgraph.engine.get_engine">
<code className="sig-prename descclassname"><span className="pre">splitgraph.engine.</span></code><code className="sig-name descname"><span className="pre">get_engine</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">name</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">Optional</span><span className="p"><span className="pre">[</span></span><span className="pre">str</span><span className="p"><span className="pre">]</span></span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">None</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">use_socket</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">False</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">use_fdw_params</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">False</span></span></em>, <em className="sig-param"><span className="n"><span className="pre">autocommit</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">bool</span></span> <span className="o"><span className="pre">=</span></span> <span className="default_value"><span className="pre">False</span></span></em><span className="sig-paren">)</span> → <span className="pre">PostgresEngine</span><a className="headerlink" href="#splitgraph.engine.get_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the current global engine or a named remote engine</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><ul className="simple">
<li><p><strong>name</strong> – Name of the remote engine as specified in the config. If None, the current global engine
is returned.</p></li>
<li><p><strong>use_socket</strong> – Use a local UNIX socket instead of PG_HOST, PG_PORT for LOCAL engine connections.</p></li>
<li><p><strong>use_fdw_params</strong> – Use the _FDW connection parameters (SG_ENGINE_FDW_HOST/PORT). By default,
will infer from the global splitgraph.config.IN_FDW flag.</p></li>
<li><p><strong>autocommit</strong> – If True, the engine will not open SQL transactions implicitly.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl className="py function">
<dt id="splitgraph.engine.set_engine">
<code className="sig-prename descclassname"><span className="pre">splitgraph.engine.</span></code><code className="sig-name descname"><span className="pre">set_engine</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">engine</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">PostgresEngine</span></span></em><span className="sig-paren">)</span> → <span className="pre">None</span><a className="headerlink" href="#splitgraph.engine.set_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch the global engine to a different one.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><p><strong>engine</strong> – Engine</p>
</dd>
</dl>
</dd></dl>

<dl className="py function">
<dt id="splitgraph.engine.switch_engine">
<code className="sig-prename descclassname"><span className="pre">splitgraph.engine.</span></code><code className="sig-name descname"><span className="pre">switch_engine</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">engine</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">PostgresEngine</span></span></em><span className="sig-paren">)</span> → <span className="pre">Iterator</span><span className="p"><span className="pre">[</span></span><span className="pre">None</span><span className="p"><span className="pre">]</span></span><a className="headerlink" href="#splitgraph.engine.switch_engine" title="Permalink to this definition">¶</a></dt>
<dd><p>Switch the global engine to a different one. The engine will
get switched back on exit from the context manager.</p>
<dl className="field-list simple">
<dt className="field-odd">Parameters</dt>
<dd className="field-odd"><p><strong>engine</strong> – Engine</p>
</dd>
</dl>
</dd></dl>

<dl className="py function">
<dt id="splitgraph.engine.validate_type">
<code className="sig-prename descclassname"><span className="pre">splitgraph.engine.</span></code><code className="sig-name descname"><span className="pre">validate_type</span></code><span className="sig-paren">(</span><em className="sig-param"><span className="n"><span className="pre">t</span></span><span className="p"><span className="pre">:</span></span> <span className="n"><span className="pre">str</span></span></em><span className="sig-paren">)</span> → <span className="pre">str</span><a className="headerlink" href="#splitgraph.engine.validate_type" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div><div className="section" id="splitgraph-engine-package">

<div className="section" id="subpackages">
<h2 id="subpackages">Subpackages<a className="headerlink" href="#subpackages" title="Permalink to this headline">¶</a></h2>
<div className="toctree-wrapper compound">
<ul>
<li className="toctree-l1"><a className="reference internal" href="splitgraph.engine.postgres/">splitgraph.engine.postgres package</a><ul>
<li className="toctree-l2"><a className="reference internal" href="splitgraph.engine.postgres/#submodules">Submodules</a></li>
<li className="toctree-l2"><a className="reference internal" href="splitgraph.engine.postgres/#module-splitgraph.engine.postgres.engine">splitgraph.engine.postgres.engine module</a></li>
<li className="toctree-l2"><a className="reference internal" href="splitgraph.engine.postgres/#module-splitgraph.engine.postgres">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</div>

</div>
</div>