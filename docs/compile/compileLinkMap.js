const { makeExportMap, getAutogeneratedTopLevelDirs } = require("./makePages");

/*
  Compile the minimum amount of content necessary to decide what type of link a URL is

  We'll probably have more autogen content (_content) than "regular" content
  in pages/, so track the "regular" content instead, since it takes up less
  space and this page is pre-evaluated as part of the build
*/

const { exportMap } = makeExportMap();
const dirs = getAutogeneratedTopLevelDirs({ exportMap });

const nonAutogenContent = Object.keys(exportMap).filter(
  (url) => !exportMap[url].page.includes("_content")
);

module.exports = {
  dirs,
  nonAutogenContent,
};
